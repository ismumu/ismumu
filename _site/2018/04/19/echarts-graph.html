<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>在React中使用echarts的graph完成时间轴 - ismumu' home</title>
	<link rel="shortcut icon" href="/favicon.ico">
	<script src="/js/jquery/jquery.min.js"></script>
	<script src="/js/popper/popper.min.js"></script>
	<script src="/js/bootstrap/bootstrap.min.js"></script>
	<script src="/js/jquery/jquery.pin.js"></script>
	<script src="/js/gitment/gitment.js"></script>
	<script src="/js/blog/canvas.code.js"></script>

	<link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" href="/css/fonts/font-awesome.min.css">
	<link rel="stylesheet" href="/css/gitment/gitment.css">
	<link rel="stylesheet" href="/css/common/common.css">
	<link rel="stylesheet" href="/css/highlight/highlight.css">
	<link rel="stylesheet" href="/css/blog/index.css">


</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
	<a class="navbar-brand" href="/">ismumu' home</a> | 
	<div class="collapse navbar-collapse">
		<ul class="navbar-nav">
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=Javascript">Javascript</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=GitHub">GitHub</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=Regex">Regex</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=Nginx">Nginx</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=Linux">Linux</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=Svn">Svn</a>
				</li>
			 
				<li class="nav-item">
					<a class="nav-link" href="/tag.html?tag=MySQL">MySQL</a>
				</li>
			
		</ul>
	</div>
</nav>
<canvas class="blog-canvas" id="J-blog-canvas"></canvas>
<div class="container-fluid">
	<div class="row">
		<div class="col-sm-3 sidebar">
			<div class="post-list">
				<ul>
					
					<li>
						<h2 class="post-title"><a href="/2018/04/19/echarts-graph.html">在React中使用echarts的graph完成时间轴</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2018/04/03/mysql-check-port.html">mysql查看当前端口号</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2018/03/21/svn.html">svn常见问题汇总</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2018/03/21/linux.html">linux常见问题汇总</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2017/08/09/nginx-spa.html">在Nginx下配置使用单页面spa</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2017/08/08/gzip.html">Nginx开启gzip</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2017/07/08/regex.html">常用正则总结</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2017/06/05/create-github-pages.html">创建github page</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2016/06/06/different-time-zones.html">new Date 不同时区的转换</a></h2>
					</li>
					
				</ul>
			</div>
		</div>
		<div class="col-sm-9">
			<div class="blog-content">
				<h1>在React中使用echarts的graph完成时间轴</h1>
				<h3 id="效果图">效果图</h3>

<p>可点击查看大图</p>

<p><a href="/images/blog/1.png" target="_blank"><img width="1000" src="/images/blog/1.png" /></a></p>

<p>1.安装依赖包</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">echarts</span><span class="o">-</span><span class="k">for</span><span class="o">-</span><span class="nx">react</span>
<span class="nx">npm</span> <span class="nx">install</span> <span class="o">--</span><span class="nx">save</span> <span class="nx">echarts</span>
</code></pre></div></div>

<p>2.mock接口返回数据</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> 
<span class="p">{</span>
	<span class="s2">"code"</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
	<span class="s2">"message"</span><span class="p">:</span> <span class="s2">"操作成功！"</span><span class="p">,</span>
	<span class="s2">"data"</span><span class="p">:</span> <span class="p">{</span>
		<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
		<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
		<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"下单"</span><span class="p">,</span>
		<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
		<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"货主下单"</span><span class="p">,</span>
		<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:40:59"</span><span class="p">,</span>
		<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
		<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
			<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
			<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
			<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"分配"</span><span class="p">,</span>
			<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
			<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"分配Test测试承运商"</span><span class="p">,</span>
			<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:41:18"</span><span class="p">,</span>
			<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
			<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
				<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
				<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"接单"</span><span class="p">,</span>
				<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="s2">"remark"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:42:07"</span><span class="p">,</span>
				<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
				<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
					<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
					<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
					<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"完成(承运商)"</span><span class="p">,</span>
					<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
					<span class="s2">"remark"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
					<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:52:04"</span><span class="p">,</span>
					<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="p">[{</span>
						<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
						<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
						<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"调度"</span><span class="p">,</span>
						<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
						<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"配载"</span><span class="p">,</span>
						<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:43:09"</span><span class="p">,</span>
						<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
							<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
							<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
							<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"发车"</span><span class="p">,</span>
							<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
							<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"调度发车，车牌号：浙B11111"</span><span class="p">,</span>
							<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:45:43"</span><span class="p">,</span>
							<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
								<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
								<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
								<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"发运"</span><span class="p">,</span>
								<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
								<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"发运"</span><span class="p">,</span>
								<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:46:21"</span><span class="p">,</span>
								<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
								<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
									<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
									<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
									<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"签收"</span><span class="p">,</span>
									<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
									<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"卸货"</span><span class="p">,</span>
									<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:48:28"</span><span class="p">,</span>
									<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
									<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
										<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
										<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"9876"</span><span class="p">,</span>
										<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"回单(承运商)"</span><span class="p">,</span>
										<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
										<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"回单"</span><span class="p">,</span>
										<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:52:04"</span><span class="p">,</span>
										<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
										<span class="s2">"children"</span><span class="p">:</span> <span class="kc">null</span>
									<span class="p">}</span>
								<span class="p">}</span>
							<span class="p">}</span>
						<span class="p">}</span>
					<span class="p">},</span> <span class="p">{</span>
						<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
						<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"5644"</span><span class="p">,</span>
						<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"调度"</span><span class="p">,</span>
						<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
						<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"配载"</span><span class="p">,</span>
						<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:44:58"</span><span class="p">,</span>
						<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
							<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
							<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"5644"</span><span class="p">,</span>
							<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"发车"</span><span class="p">,</span>
							<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
							<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"调度发车，车牌号：浙B11111"</span><span class="p">,</span>
							<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:45:29"</span><span class="p">,</span>
							<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
								<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
								<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"5644"</span><span class="p">,</span>
								<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"发运"</span><span class="p">,</span>
								<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
								<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"发运"</span><span class="p">,</span>
								<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:46:31"</span><span class="p">,</span>
								<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
								<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
									<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
									<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"5644"</span><span class="p">,</span>
									<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"签收"</span><span class="p">,</span>
									<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
									<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"卸货"</span><span class="p">,</span>
									<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:48:42"</span><span class="p">,</span>
									<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
									<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
										<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="s2">"123456"</span><span class="p">,</span>
										<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="s2">"5644"</span><span class="p">,</span>
										<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"回单(承运商)"</span><span class="p">,</span>
										<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="s2">"浙B11111"</span><span class="p">,</span>
										<span class="s2">"remark"</span><span class="p">:</span> <span class="s2">"回单"</span><span class="p">,</span>
										<span class="s2">"createDate"</span><span class="p">:</span> <span class="s2">"2018-04-18 17:51:31"</span><span class="p">,</span>
										<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
										<span class="s2">"children"</span><span class="p">:</span> <span class="kc">null</span>
									<span class="p">}</span>
								<span class="p">}</span>
							<span class="p">}</span>
						<span class="p">}</span>
					<span class="p">}],</span>
					<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
						<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"回单(货主)"</span><span class="p">,</span>
						<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"remark"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"createDate"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
						<span class="s2">"children"</span><span class="p">:</span> <span class="p">{</span>
							<span class="s2">"omsRequestOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"shippingOrderNo"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"logisticsStatus"</span><span class="p">:</span> <span class="s2">"完成(货主)"</span><span class="p">,</span>
							<span class="s2">"plateNumber"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"remark"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"createDate"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"operateRecordList"</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
							<span class="s2">"children"</span><span class="p">:</span> <span class="kc">null</span>
						<span class="p">}</span>
					<span class="p">}</span>
				<span class="p">}</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">},</span>
<span class="p">}</span>
</code></pre></div></div>

<p>3.原始组件数据结构</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 时间轴数据</span>
<span class="nx">TimeLineOptionData</span><span class="p">:</span> <span class="p">{</span>
    <span class="c1">// tooltip: {</span>
        <span class="c1">// formatter: function (params) {</span>
        <span class="c1">//     if ( params.data.remark ) {</span>
        <span class="c1">//         return '备注：'+ params.data.remark;</span>
        <span class="c1">//     } else {</span>
        <span class="c1">//         return '';</span>
        <span class="c1">//     }</span>
        <span class="c1">// },</span>
    <span class="c1">// },</span>
    <span class="nl">textStyle</span><span class="p">:</span> <span class="p">{</span>
        <span class="nl">color</span><span class="p">:</span> <span class="s1">'#000'</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c1">// animationDurationUpdate: 1500,</span>
    <span class="c1">// animationEasingUpdate: 'quinticInOut',</span>
    <span class="nx">series</span> <span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="s1">'graph'</span><span class="p">,</span>
            <span class="na">layout</span><span class="p">:</span> <span class="s1">'none'</span><span class="p">,</span>
            <span class="na">color</span><span class="p">:</span> <span class="p">[</span><span class="s1">'#07b483'</span><span class="p">],</span>
            <span class="na">symbolSize</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="c1">// 图标大小</span>
            <span class="na">roam</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="na">label</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">normal</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">show</span><span class="p">:</span> <span class="kc">true</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="na">edgeSymbol</span><span class="p">:</span> <span class="p">[</span><span class="s1">'circle'</span><span class="p">,</span> <span class="s1">'arrow'</span><span class="p">],</span>
            <span class="na">edgeSymbolSize</span><span class="p">:</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span>
            <span class="na">edgeLabel</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">normal</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">textStyle</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">fontSize</span><span class="p">:</span> <span class="mi">20</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">},</span>
            <span class="na">data</span><span class="p">:</span> <span class="p">[],</span>
            <span class="na">links</span><span class="p">:</span> <span class="p">[],</span>
            <span class="na">lineStyle</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">normal</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">opacity</span><span class="p">:</span> <span class="p">.</span><span class="mi">9</span><span class="p">,</span>
                    <span class="na">width</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
                    <span class="na">curveness</span><span class="p">:</span> <span class="mi">0</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">},</span>
</code></pre></div></div>

<p>4.遍历组装数据格式</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">_data</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">;</span>



<span class="kd">let</span> <span class="nx">_TimeLineData</span> <span class="o">=</span> <span class="p">[];</span>

<span class="cm">/**
    *
    * @param {当前数据} nowData
    * @param {索引值} index
    */</span>
<span class="kd">let</span> <span class="nx">deepTree</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nowData</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">_x</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">180</span><span class="p">,</span> <span class="mi">200</span><span class="p">];</span>

    <span class="kd">let</span> <span class="nx">_obj</span> <span class="o">=</span> <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">logisticsStatus</span><span class="p">,</span>
        <span class="na">legendHoverLink</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="na">x</span><span class="p">:</span> <span class="nx">_x</span><span class="p">[</span><span class="nx">index</span><span class="p">],</span>
        <span class="na">y</span><span class="p">:</span> <span class="mi">120</span><span class="p">,</span>
        <span class="na">remark</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">remark</span><span class="p">,</span>
        <span class="na">createDate</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span> <span class="p">?</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
        <span class="na">label</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="na">position</span><span class="p">:</span> <span class="s1">'bottom'</span><span class="p">,</span>
            <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
            <span class="na">distance</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
            <span class="na">formatter</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span><span class="s1">'</span><span class="err">\</span><span class="s1">n</span><span class="err">\</span><span class="s1">n'</span> <span class="o">+</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">createDate</span><span class="p">;</span>
            <span class="p">},</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span> <span class="p">)</span> <span class="p">{</span>
        <span class="c1">// 没有时间显示灰色圆圈</span>
        <span class="nx">_obj</span><span class="p">.</span><span class="nx">itemStyle</span> <span class="o">=</span> <span class="p">{</span>
            <span class="na">color</span><span class="p">:</span> <span class="s1">'#CCC'</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">_TimeLineData</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_obj</span><span class="p">)</span>

    <span class="k">if</span><span class="p">(</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">index</span><span class="o">++</span><span class="p">;</span>
        <span class="nx">deepTree</span><span class="p">(</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="nx">deepTree</span><span class="p">(</span><span class="nx">_data</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">_TimeLineDataLinks</span> <span class="o">=</span> <span class="p">[];</span>
<span class="nx">_TimeLineData</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">_TimeLineData</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="nx">i</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">)</span> <span class="k">return</span><span class="p">;</span>
        <span class="nx">_TimeLineDataLinks</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="na">source</span><span class="p">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
            <span class="na">target</span><span class="p">:</span> <span class="nx">_TimeLineData</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
        <span class="p">})</span>
    <span class="p">}</span>
<span class="p">})</span>


<span class="c1">// 遍历分叉数据</span>
<span class="kd">var</span> <span class="nx">operateRecordList</span> <span class="o">=</span> <span class="nx">_data</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">children</span><span class="p">.</span><span class="nx">operateRecordList</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nx">operateRecordList</span> <span class="o">&amp;&amp;</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

    <span class="kd">let</span> <span class="nx">_y</span> <span class="o">=</span> <span class="p">[];</span>

    <span class="c1">// 分叉数据最多支持7条</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">1</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">120</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">110</span><span class="p">,</span> <span class="mi">130</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">140</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">4</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">90</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">150</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">160</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">6</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">70</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">130</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">170</span><span class="p">]</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">length</span> <span class="o">==</span> <span class="mi">7</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">_y</span> <span class="o">=</span> <span class="p">[</span><span class="mi">60</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">120</span><span class="p">,</span> <span class="mi">140</span><span class="p">,</span> <span class="mi">160</span><span class="p">,</span> <span class="mi">180</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="nx">operateRecordList</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">_array</span> <span class="o">=</span> <span class="p">[];</span>
        <span class="kd">let</span> <span class="nx">_deepTree</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">nowData</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>



            <span class="kd">let</span> <span class="nx">_obj</span> <span class="o">=</span> <span class="p">{</span>
                <span class="na">name</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">logisticsStatus</span> <span class="o">+</span> <span class="nx">i</span><span class="p">,</span>
                <span class="na">_name</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">logisticsStatus</span><span class="p">,</span>
                <span class="na">x</span><span class="p">:</span> <span class="nx">index</span> <span class="o">*</span> <span class="mi">20</span> <span class="o">+</span> <span class="mi">60</span><span class="p">,</span>
                <span class="na">y</span><span class="p">:</span> <span class="nx">_y</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span>
                <span class="na">remark</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">remark</span><span class="p">,</span>
                <span class="na">createDate</span><span class="p">:</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span> <span class="p">?</span> <span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">16</span><span class="p">)</span> <span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
                <span class="na">label</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">show</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
                    <span class="na">position</span><span class="p">:</span> <span class="s1">'bottom'</span><span class="p">,</span>
                    <span class="na">fontSize</span><span class="p">:</span> <span class="mi">14</span><span class="p">,</span>
                    <span class="na">distance</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span>
                    <span class="na">formatter</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
                        <span class="k">if</span> <span class="p">(</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">createDate</span> <span class="p">)</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">_name</span> <span class="o">+</span><span class="s1">'</span><span class="err">\</span><span class="s1">n</span><span class="err">\</span><span class="s1">n'</span> <span class="o">+</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">createDate</span><span class="p">;</span>
                        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                            <span class="k">return</span> <span class="nx">params</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">_name</span><span class="p">;</span>
                        <span class="p">}</span>
                    <span class="p">},</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">createDate</span> <span class="p">)</span> <span class="p">{</span>
                <span class="c1">// 没有时间显示灰色圆圈</span>
                <span class="nx">_obj</span><span class="p">.</span><span class="nx">itemStyle</span> <span class="o">=</span> <span class="p">{</span>
                    <span class="na">color</span><span class="p">:</span> <span class="s1">'#CCC'</span><span class="p">,</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nx">_array</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">_obj</span><span class="p">);</span>


            <span class="k">if</span><span class="p">(</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">children</span><span class="p">)</span> <span class="p">{</span>
                <span class="nx">index</span><span class="o">++</span><span class="p">;</span>
                <span class="nx">_deepTree</span><span class="p">(</span><span class="nx">nowData</span><span class="p">.</span><span class="nx">children</span><span class="p">,</span> <span class="nx">index</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="nx">_deepTree</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
        <span class="nx">_TimeLineData</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">_array</span><span class="p">);</span>

        <span class="c1">// 从第3个分出去的分支线</span>
        <span class="kd">let</span> <span class="nx">_links</span> <span class="o">=</span> <span class="p">[{</span>
            <span class="na">source</span><span class="p">:</span> <span class="nx">_TimeLineData</span><span class="p">[</span><span class="mi">2</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
            <span class="na">target</span><span class="p">:</span> <span class="nx">_array</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
        <span class="p">}];</span>
            <span class="nx">_array</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span> <span class="nx">_array</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="p">)</span> <span class="p">{</span>
                    <span class="nx">_links</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
                    <span class="na">source</span><span class="p">:</span> <span class="nx">d</span><span class="p">.</span><span class="nx">name</span><span class="p">,</span>
                    <span class="na">target</span><span class="p">:</span> <span class="nx">_array</span><span class="p">[</span><span class="nx">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
                <span class="p">})</span>
            <span class="p">}</span>
        <span class="p">})</span>

        <span class="c1">// 分支线最后一个回归主线到第4个</span>
        <span class="nx">_links</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
            <span class="na">source</span><span class="p">:</span> <span class="nx">_array</span><span class="p">[</span><span class="nx">_array</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
            <span class="na">target</span><span class="p">:</span> <span class="nx">_TimeLineData</span><span class="p">[</span><span class="mi">3</span><span class="p">].</span><span class="nx">name</span><span class="p">,</span>
        <span class="p">})</span>
        <span class="nx">_TimeLineDataLinks</span><span class="p">.</span><span class="nx">push</span><span class="p">(...</span><span class="nx">_links</span><span class="p">);</span>

    <span class="p">})</span>
<span class="p">}</span>



<span class="nx">TimeLineOptionData</span><span class="p">.</span><span class="nx">series</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">_TimeLineData</span><span class="p">;</span>
<span class="nx">TimeLineOptionData</span><span class="p">.</span><span class="nx">series</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">links</span> <span class="o">=</span> <span class="nx">_TimeLineDataLinks</span><span class="p">;</span>
</code></pre></div></div>

<p>5.组件调用</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="nx">ReactEcharts</span>
    <span class="nx">option</span><span class="o">=</span><span class="p">{</span><span class="nx">TimeLineOptionData</span><span class="p">}</span>
    <span class="nx">notMerge</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
    <span class="nx">lazyUpdate</span><span class="o">=</span><span class="p">{</span><span class="kc">true</span><span class="p">}</span>
    <span class="nx">theme</span><span class="o">=</span><span class="p">{</span><span class="s2">"light"</span><span class="p">}</span>
<span class="sr">/</span><span class="err">&gt;
</span></code></pre></div></div>

<hr />


				<div id="comments"></div>
			</div>
		</div>
	</div>
</div>
<script src="/js/blog/index.js"></script>

</body>
</html>