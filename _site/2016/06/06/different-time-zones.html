<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>new Date 不同时区的转换</title>
	<script src="/js/jquery/jquery.min.js"></script>
	<script src="/js/popper/popper.min.js"></script>
	<script src="/js/bootstrap/bootstrap.min.js"></script>
	<script src="/js/jquery/jquery.pin.js"></script>

	<link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css">
	<link rel="stylesheet" href="/css/fonts/font-awesome.min.css">
	<link rel="stylesheet" href="/css/common/common.css">
	<link rel="stylesheet" href="/css/highlight/highlight.css">
	<link rel="stylesheet" href="/css/blog/index.css">
</head>

<body>

<nav class="navbar navbar-expand-lg navbar-dark bg-dark fixed-top">
	<a class="navbar-brand" href="/">ismumu' home</a>
	<div class="collapse navbar-collapse" id="navbarNav">
		<ul class="navbar-nav">
			<li class="nav-item active">
				<a class="nav-link" href="#">Home</a>
			</li>
		</ul>
	</div>
</nav>
<div class="container-fluid">
	<div class="row">
		<div class="col-sm-3 sidebar">
			<div class="post-list">
				<ul>
					
					<li>
						<h2 class="post-title"><a href="/2016/06/06/different-time-zones.html">new Date 不同时区的转换</a></h2>
					</li>
					
					<li>
						<h2 class="post-title"><a href="/2016/03/25/firstblog.html">My first blog</a></h2>
					</li>
					
				</ul>
			</div>
		</div>
		<div class="col-sm-9">
			<div class="blog-content">
				<h1>new Date 不同时区的转换</h1>
				<p>如下：</p>

<figure class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="n">function</span> <span class="n">calcTime</span><span class="p">(</span><span class="n">city</span><span class="p">,</span> <span class="n">offset</span><span class="p">)</span> <span class="p">{</span> 
  <span class="n">var</span> <span class="n">d</span> <span class="o">=</span> <span class="n">new</span> <span class="no">Date</span><span class="p">();</span> 
  <span class="n">utc</span> <span class="o">=</span> <span class="n">d</span><span class="p">.</span><span class="nf">getTime</span><span class="p">()</span> <span class="o">+</span> <span class="p">(</span><span class="n">d</span><span class="p">.</span><span class="nf">getTimezoneOffset</span><span class="p">()</span> <span class="o">*</span> <span class="mi">60000</span><span class="p">);</span> 
  <span class="n">nd</span> <span class="o">=</span> <span class="n">new</span> <span class="no">Date</span><span class="p">(</span><span class="n">utc</span> <span class="o">+</span> <span class="p">(</span><span class="mi">3600000</span> <span class="o">*</span> <span class="n">offset</span><span class="p">));</span> 
  <span class="k">return</span> <span class="s2">"The local time in "</span> <span class="o">+</span> <span class="n">city</span> <span class="o">+</span> <span class="s2">" is "</span> <span class="o">+</span> <span class="n">nd</span><span class="p">.</span><span class="nf">toLocaleString</span><span class="p">();</span> 
<span class="p">}</span>

<span class="n">alert</span><span class="p">(</span><span class="n">calcTime</span><span class="p">(</span><span class="s1">'Singapore'</span><span class="p">,</span> <span class="s1">'+8'</span><span class="p">));</span><span class="sr">//</span><span class="err">强制转换成中国时间</span>
<span class="n">alert</span><span class="p">(</span><span class="n">calcTime</span><span class="p">(</span><span class="s1">'Singapore'</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="n">new</span> <span class="no">Date</span><span class="p">()).</span><span class="nf">getTimezoneOffset</span><span class="p">()</span><span class="o">/</span><span class="mi">60</span><span class="p">));</span><span class="sr">//</span><span class="err">各地当地时间</span></code></pre></figure>

			</div>
		</div>
	</div>
</div>
<script>
	$(function () {
		$(".post-list").pin({containerSelector: ".sidebar"})
	})
</script>
</body>
</html>